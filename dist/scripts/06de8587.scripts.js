"use strict";var app=angular.module("gutenbergApp",["ngTouch","vr.directives.slider","ngClipboard","ngRoute","config"]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]);angular.module("config",[]).constant("ENV","development"),app.controller("MainController",["$scope","$document","PlaceholderTextService","DownloadService","Property","Properties",function(a,b,c,d,e,f){a.controls=!1,a.toggleControls=function(){a.controls=!a.controls},a.paras="",a.getText=function(b){c.getLocalText(b).success(function(b){a.paras=b})},a.getText(2),a.obj={test:"hello!"},a.getDownload=function(a){d.getDownload(a).success(function(a){console.log(a)})},a.getDl=function(a){d.getDownload(a).success(function(a){console.log(a)})},a.type={properties:{},typeface:{value:"garamond",options:[{name:"Times New Roman","class":"times-new-roman"},{name:"Helvetica Neue","class":"helvetica-neue"},{name:"Garamond","class":"garamond"}]},style:function(){var a={};for(var b in this.properties)a[this.properties[b]["property-name"]]=this.properties[b].propertyValue();return a},css:function(){var a=this.style(),b="";for(var c in a)b+=c+": "+a[c]+";\n";return b},currentProperties:function(){var a={};for(var b in this.properties)a[b]=this.properties[b].name;return a}},a.testString="something",a.type.properties.leading=f.create("leading"),a.type.properties.size=f.create("size"),a.addProperty=function(b){a.type.properties[b]=f.create(b)},a.removeProperty=function(b){console.log("called"),delete a.type.properties[b]},a.availableProperties=function(){return f.getAvailable(a.type.currentProperties())},a.test=function(){console.log("message")}}]),app.directive("keypress",function(){return function(a){var b="shiftKey",c=function(a,c){return a.which===c&&a[b]};$(window).bind("keydown keypress",function(b){c(b,38)?(a.type.properties.leading.microIncrease(),a.$apply(),b.preventDefault()):c(b,40)?(a.type.properties.leading.microDecrease(),a.$apply(),b.preventDefault(),window.test=b.shiftKey):c(b,187)?(a.type.properties.size.microIncrease(),a.$apply(),b.preventDefault()):c(b,189)&&(a.type.properties.size.microDecrease(),a.$apply(),b.preventDefault(),window.test=b.shiftKey)})}}),app.directive("property",function(){return{replace:!0,transclude:!0,scope:{property:"=",name:"=",remove:"="},templateUrl:"scripts/directives/propertyTemplate.html",link:function(a){console.log(a.name)}}}),angular.module("gutenbergApp").directive("hoverhover",function(){return{link:function(){}}}),app.directive("expander",function(){return{link:function(a,b){var c=$(b).find(".expander-target").addClass("is-hiding");$(b).on("click",".expander-trigger",function(){c.toggleClass("is-hiding")})}}}),angular.module("ngClipboard",[]).provider("ngClip",function(){var a=this;return this.path="//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/1.3.2/ZeroClipboard.swf",{setPath:function(b){a.path=b},$get:function(){return{path:a.path}}}}).run(["$document","ngClip",function(a,b){ZeroClipboard.config({moviePath:b.path,trustedDomains:["*"],allowScriptAccess:"always",forceHandCursor:!0})}]).directive("clipCopy",["$window","ngClip",function(){return{scope:{clipCopy:"&",clipClick:"&"},restrict:"A",link:function(a,b,c){var d=new ZeroClipboard(b);d.on("load",function(d){var e=function(b){b.setText(a.$eval(a.clipCopy)),angular.isDefined(c.clipClick)&&a.$apply(a.clipClick)};d.on("mousedown",e),a.$on("$destroy",function(){d.off("mousedown",e),d.unclip(b)})})}}}]),app.factory("PlaceholderTextService",["$http","$q","ENV",function(a,b,c){return URL_BASE="","development"===c?URL_BASE="http://localhost:3000/":"production"===c&&(URL_BASE="/"),{getLoremIpsum:function(b){return a.jsonp("http://loripsum.net/api/"+b)},getHipsterIpsum:function(){return a.jsonp("http://hipsterjesus.com/api/")},getLocalText:function(b){return a.get(URL_BASE+"api/"+b)}}}]),app.factory("Property",function(){var a=function(a){angular.extend(this,a)};return a.prototype.className=function(){return this.name.replace(" ","-").toLowerCase()},a.prototype.propertyValue=function(){return String(null!=this.unit?this.value+this.unit:this.value)},a.prototype.increase=function(){this.value+=this.inc},a.prototype.decrease=function(){this.value-=this.inc},a.prototype.microIncrease=function(){this.value=parseFloat((this.value+=this.micro_inc).toFixed(2))},a.prototype.microDecrease=function(){this.value=parseFloat((this.value-=this.micro_inc).toFixed(2))},a}),app.factory("Properties",["Property",function(a){var b={leading:{name:"Leading","property-name":"line-height",value:"1",inc:1,micro_inc:.05,slider:{floor:0,ceiling:4,precision:2,step:.05}},columns:{name:"Columns","property-name":"columns",value:"1",inc:1,micro_inc:1,slider:{floor:1,ceiling:6,precision:1,step:1}},size:{name:"Size","property-name":"font-size",value:"16",unit:"px",inc:5,micro_inc:1,slider:{floor:4,ceiling:72,precision:0,step:1}},width:{name:"Container Width","property-name":"width",value:"600",unit:"px",inc:50,micro_inc:1,slider:{floor:300,ceiling:900,precision:0,step:1}},tracking:{name:"Tracking","property-name":"letter-spacing",value:"0",unit:"px",inc:5,micro_inc:1,slider:{floor:"-4",ceiling:4,precision:0,step:1}}};return this.create=function(c){return new a(b[c])},this.getAvailable=function(a){var c={};for(var d in b)d in a||(c[d]=b[d].name);return c},this}]),app.factory("DownloadService",["$http","$q",function(a){return{getDownload:function(b){return a.post("http://localhost:3000/download/",b)},getDl:function(b){return a.get("http://localhost:3000/dl/"+b)}}}]);